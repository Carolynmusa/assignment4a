<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Tic Tac Toe</title>
</head>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
  }
  .container {
    text-align: center;
    margin-top: 20px;
  }
  .title {
    font-size: 24px;
    margin-bottom: 20px;
  }
  .turn-indicator {
    border: 2px solid black;
    padding: 10px;
    margin-bottom: 20px;
  }
  .win-condition {
    border: 2px solid black;
    padding: 10px;
    margin-bottom: 20px;
  }
  .board {
    display: inline-block;
    margin: 20px;
  }
  .row {
    display: flex;
  }
  .square {
    width: 100px;
    height: 100px;
    background-color: #eab1d7;
    border: 5px solid #999;
    text-align: center;
    line-height: 100px;
    font-size: 40px;
    cursor: pointer;
  }
  .square:hover {
    background-color: #ccc;
  }
  .x {
    color: blue;
  }
  .o {
    color: red;
  }
</style>
<body>
<div class="container">
  <div class="title">Tic Tac Toe</div>
  <div class="turn-indicator">X's Turn</div>
  <div class="win-condition">Win Condition</div>
  <div class="board">
    <script>
      const NUM_ROWS = 3;
      const NUM_COLS = 3;
      const NUM_SQUARES = NUM_ROWS * NUM_COLS;
      let currentPlayer = Math.random() < 0.5 ? 'X' : 'O';
      let gameEnded = false; 
      let moves = Array(NUM_SQUARES).fill('-');

      function squareClickHandler(event) {
        if (gameEnded) return;
        const square = event.target;
        const index = Array.from(square.parentNode.children).indexOf(square);
        if (moves[index] === '-') {
          square.textContent = currentPlayer;
          moves[index] = currentPlayer;
          currentPlayer = currentPlayer === 'X' ? 'O' : 'X'; 
          updateTurnIndicator();
          checkWin();
        }
      }

      function updateTurnIndicator() {
        const turnIndicator = document.querySelector('.turn-indicator');
        turnIndicator.textContent = currentPlayer + "'s Turn";
      }

      function checkWin() {
        const winningCombinations = [
          [0, 1, 2], [3, 4, 5], [6, 7, 8], 
          [0, 3, 6], [1, 4, 7], [2, 5, 8], 
          [0, 4, 8], [2, 4, 6]           
        ];

        const winConditions = winningCombinations.map(combo => {
          return combo.map(index => moves[index]).join('');
        });

        for (const condition of winConditions) {
          if (condition === 'XXX') {
            gameEnded = true;
            document.querySelector('.win-condition').textContent = 'X wins!';
            return;
          } else if (condition === 'OOO') {
            gameEnded = true;
            document.querySelector('.win-condition').textContent = 'O wins!';
            return;
          }
        }

        if (!moves.includes('-')) {
          gameEnded = true;
          document.querySelector('.win-condition').textContent = 'Stalemate!';
        }
      }

      function startGame() {
        const squares = document.querySelectorAll('.square');
        squares.forEach(square => {
          square.textContent = '';
        });
        moves = Array(NUM_SQUARES).fill('-');
        currentPlayer = Math.random() < 0.5 ? 'X' : 'O';
        gameEnded = false;
        updateTurnIndicator();
        document.querySelector('.win-condition').textContent = 'Win Condition';
      }
      
      for (let i = 0; i < NUM_ROWS; i++) {
        const row = document.createElement('div');
        row.classList.add('row');

        for (let j = 0; j < NUM_COLS; j++) {
          const squareIndex = i * NUM_COLS + j;
          const id = "sq" + squareIndex;
          const square = document.createElement('div');
          square.className = 'square';
          square.id = id;
          square.addEventListener('click', squareClickHandler);

          row.appendChild(square);
        }

        document.querySelector('.board').appendChild(row);
      }

      updateTurnIndicator(); 
    </script>
  </div>
  <button onclick="startGame()">Start Game</button>
</div>
</body>
</html>
